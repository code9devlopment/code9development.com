(this["webpackJsonphosting-ui"]=this["webpackJsonphosting-ui"]||[]).push([[36],{1177:function(e,t,a){e.exports={wrapper:"FinalizeSpaceCreation_wrapper__2YLWj",fadeInKeyframe:"FinalizeSpaceCreation_fadeInKeyframe__1BjD9",modal_children:"FinalizeSpaceCreation_modal_children__29P_w",template:"FinalizeSpaceCreation_template__37MEV",static_template:"FinalizeSpaceCreation_static_template__1_79t",blank_template:"FinalizeSpaceCreation_blank_template___Ar49",fadeOutKeyframe:"FinalizeSpaceCreation_fadeOutKeyframe__32LzI"}},1305:function(e,t,a){"use strict";a.r(t);var c=a(8),r=a(19),s=a(38),n=a(43),i=a(2),o=a(598),p=a(36),d=a(33),u=a(5),b=a(79),_=a(47),l=a(18),j=a(202),O=a(605),m=a(758),h=a(1177),f=a.n(h),y=a(4);t.default=function(e){var t=e.template,a=e.spaceId,h=e.resetSpace,g=e.id,S=e.className,k=e.goBackFromFinialize,x=Object(d.d)((function(e){return e.main})),C=Object(d.c)(),E=Object(p.g)(),N=Object(i.useState)("Please wait...".concat(t.tech===l.c.DYNAMIC?" this might take a while":"")),w=Object(n.a)(N,2),A=w[0],I=w[1],v=Object(i.useState)(!1),T=Object(n.a)(v,2),D=T[0],q=T[1],z=Object(i.useCallback)((function(e){q(e),I("An error occurred")}),[I]),F=Object(i.useState)(!1),M=Object(n.a)(F,2),P=M[0],K=M[1],L=Object(i.useState)(""),R=Object(n.a)(L,2),B=R[0],V=(R[1],Object(i.useState)(h?"Resetting space...":"Creating space...")),W=Object(n.a)(V,2),J=W[0],Y=W[1];Object(i.useEffect)((function(){B&&B.length>0&&Y("".concat(B," space..."))}),[B]);var G=Object(i.useCallback)(Object(s.a)(Object(r.a)().mark((function e(){var c,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.fetchSpaces)({url:"/spaceregistration",method:"POST",data:{action:h?"reset":"register",spaceId:a,template:t.template_id,_out_of_quota:x.usage_status._out_of_quota}});case 2:if(c=e.sent,u.logging.logDebug("FinalizeSpaceCreation -> registerSpace -> reqRes: ",c),"undefined"!==typeof c.data._update_main_state&&C(Object(b.q)(c.data._update_main_state)),"undefined"!==typeof c.data._update_space&&null!==c.data._update_space&&C(h?Object(b.r)(c.data._update_space):Object(b.b)(c.data._update_space)),"0"!==c.error.code){e.next=16;break}return C(Object(_.a)({id:Object(o.a)(),dismissed:!1,type:"success",header:h?"Space reset":"Space created",body:h?Object(y.jsxs)("span",{children:["Space named ",Object(y.jsx)("strong",{children:a})," has been reset with template ",Object(y.jsx)("strong",{children:t.title}),"."]}):Object(y.jsxs)("span",{children:["Space named ",Object(y.jsx)("strong",{children:a})," is set up and ready for use."]})})),C(Object(b.s)({onboarding_step:0,is_resetting_space:void 0})),C(Object(j.b)()),e.next=12,new Promise((function(e){return setTimeout(e,3e3)}));case 12:C(Object(b.p)(a+"/")),E.push("/space/"+a),e.next=34;break;case 16:if("quota"!==c.error.context){e.next=21;break}C(Object(O.a)(c.error)),E.push("/"),e.next=34;break;case 21:s="",e.t0=c.error.code,e.next="NO_SPACE_ID"===e.t0||"INVALID_NAME"===e.t0?25:"SPACE_NAME_OWNED"===e.t0?27:"NAME_TAKEN"===e.t0?29:31;break;case 25:return s="Space name is invalid.",e.abrupt("break",32);case 27:return s='The name "'.concat(a,'" is already owned by you, please try another one'),e.abrupt("break",32);case 29:return s='The name "'.concat(a,'" is already taken, please try another one'),e.abrupt("break",32);case 31:s=c.error.description;case 32:C(Object(_.a)({id:Object(o.a)(),dismissed:!1,type:"error",header:h?"Reset space error":"Create space error",body:s})),z(!0);case 34:case"end":return e.stop()}}),e)}))),[C,E,x.usage_status._out_of_quota,h,z,a,t.template_id,t.title]),H=Object(i.useCallback)(Object(s.a)(Object(r.a)().mark((function e(){var s,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.fetchSpaces)({url:"/spaceregistration",method:"POST",data:{action:h?"reset":"register",spaceId:a,template:t.template_id,_out_of_quota:x.usage_status._out_of_quota}});case 3:if(s=e.sent,u.logging.logDebug("FinalizeSpaceCreation -> createDynamicSpace -> reqRes:",s),"undefined"!==typeof s.data._update_main_state&&C(Object(b.q)(s.data._update_main_state)),"undefined"!==typeof s.data._update_space&&null!==s.data._update_space&&C(h?Object(b.r)(s.data._update_space):Object(b.b)(s.data._update_space)),"0"!==s.error.code){e.next=16;break}C(Object(b.s)({onboarding_step:0,is_resetting_space:void 0})),C(Object(b.q)(Object(c.a)(Object(c.a)({},x),{},{spaces:s.data.spaces}))),C(Object(j.b)()),C(Object(b.p)(a+"/")),C(Object(_.a)({id:Object(o.a)(),dismissed:!1,type:"success",header:"Dynamic space created",body:Object(y.jsxs)("span",{children:["Dynamic space named ",Object(y.jsx)("strong",{children:a})," is set up and ready for use."]})})),E.push("/space/"+a),e.next=34;break;case 16:if("quota"!==s.error.context){e.next=21;break}C(Object(O.a)(s.error)),E.push("/"),e.next=34;break;case 21:n="",e.t0=s.error.code,e.next="NO_SPACE_ID"===e.t0||"INVALID_NAME"===e.t0?25:"SPACE_NAME_OWNED"===e.t0?27:"NAME_TAKEN"===e.t0?29:31;break;case 25:return n="Space name is invalid.",e.abrupt("break",32);case 27:return n='The name "'.concat(a,'" is already owned by you, please try another one'),e.abrupt("break",32);case 29:return n='The name "'.concat(a,'" is already taken, please try another one'),e.abrupt("break",32);case 31:n=s.error.description;case 32:C(Object(_.a)({id:Object(o.a)(),dismissed:!1,type:"error",header:h?"Reset space error":"Create space error",body:n})),z(!0);case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(0),C(Object(_.a)({id:Object(o.a)(),dismissed:!1,type:"error",header:"Create dynamic space error",body:e.t1.message||e.t1.errorMessage})),z(!0);case 40:case"end":return e.stop()}}),e,null,[[0,36]])}))),[C,E,x,h,z,a,t.template_id]);return Object(i.useEffect)((function(){D&&k()}),[k,D]),Object(i.useEffect)((function(){P||(K(!0),t.tech===l.c.STATIC?G():H())}),[H,P,G,t.tech]),Object(i.useEffect)((function(){var e=document.getElementById("launcher");return e&&(e.style.display="none"),function(){e&&(e.style.display="block")}}),[]),Object(y.jsx)("div",{id:g,className:"".concat(f.a.wrapper).concat(S?" ".concat(S):""),children:Object(y.jsx)(m.a,{spaceId:a,template:t,selectedTechnology:t.tech,header:J,displayLoader:!D,subTitle:A,showTechIconBottom:!0,showSpinner:!0,className:f.a.modal_children,templateClassName:"".concat(f.a.template).concat(t.thumbnail?"":" ".concat(f.a.blank_template))})})}}}]);
//# sourceMappingURL=36.f5816c98.chunk.js.map